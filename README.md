# Telegram Bot КСТ ⚡️

Телеграм-бот колледжа с кнопками для категорий: ПЕДАГОГАМ, СТУДЕНТАМ, АБИТУРИЕНТАМ, О НАС.

## Особенности

- **Постоянная клавиатура** - кнопки внизу экрана для быстрого доступа
- **Бот-предсказатель** - развлекательная функция для студентов
- **Рейтинги групп** - отображение рейтинга групп специальности
- **Еженедельные опросы** - ссылки на опросы для студентов
- **Расписание обедов** - информация о расписании обедов

## Два варианта развертывания

### Вариант 1: Cloudflare Workers (рекомендуется) ⚡️

Бот работает через webhooks на Cloudflare Workers. Это современный и бесплатный способ хостинга.

**Преимущества:**
- Бесплатный хостинг
- Автоматическое масштабирование
- Быстрая работа по всему миру
- Интеграция с GitHub для автоматического деплоя

**См. подробную инструкцию:** [DEPLOY.md](DEPLOY.md)

**Быстрый старт:**
```bash
# Установка Wrangler CLI
npm install -g wrangler

# Авторизация
wrangler login

# Установка секретов
wrangler secret put BOT_TOKEN
wrangler secret put BOT_OWNER_ID  # опционально

# Создание KV namespace
wrangler kv:namespace create "CONFIG"

# Деплой
wrangler deploy
```

### Вариант 2: Локальный запуск (Python)

Классический вариант с polling для локального запуска или VPS.

**Установка:**
```bash
pip install -r requirements.txt
```

**Запуск:**
```bash
python kst_bot.py
```

**Настройка:**
- Установите переменную окружения `BOT_TOKEN` или отредактируйте `kst_bot.py`
- Создайте папку `config/` и файлы:
  - `config/ratings.json` - рейтинги групп
  - `config/weekly_poll.json` - еженедельный опрос

## Структура проекта

```
БОТ/
├── src/
│   └── index.js          # Код для Cloudflare Workers
├── kst_bot.py            # Код для локального запуска (Python)
├── package.json          # Зависимости для Workers
├── wrangler.toml        # Конфигурация Cloudflare Workers
├── requirements.txt     # Зависимости для Python
├── DEPLOY.md            # Инструкция по деплою на Cloudflare
└── README.md            # Этот файл
```

## Команды бота

- `/start` - Запустить бота и показать главное меню
- `/menu` - Показать главное меню
- `/restart` - Перезапустить бота (только для владельца)
- `/help` - Справка по командам
- `/about` - О проекте
- `/announcements` - Канал объявлений
- `/newsfeed` - Лента новостей для абитуриентов
- `/predictor` - Бот-предсказатель

## Разделы бота

### ПЕДАГОГАМ
- Опросы

### АБИТУРИЕНТАМ
- Чат КСТ
- Часто задаваемые вопросы
- Дни открытых дверей

### СТУДЕНТАМ
- Чат КСТ
- Рейтинги групп
- Сведения о семестрах
- Бот-предсказатель
- Еженедельный опрос
- Расписание обедов

### О НАС
- Партнёры-работодатели
- Новости КСТ

## Настройка конфигураций

### Для Cloudflare Workers (KV Storage)

```bash
# Обновление рейтингов
wrangler kv:key put "ratings" --path config/ratings.json

# Обновление опроса
wrangler kv:key put "weekly_poll" --path config/weekly_poll.json
```

### Для локального запуска

Отредактируйте файлы в папке `config/`:
- `config/ratings.json`
- `config/weekly_poll.json`

## Поддержка

По вопросам работы бота обращайтесь к администраторам колледжа.
